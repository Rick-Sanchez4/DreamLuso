services:
  # Backend API
  - type: web
    name: dreamluso-api
    runtime: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: DatabaseProvider
        value: PostgreSQL
      - key: ConnectionStrings__DreamLusoDB
        sync: false  # Configure manualmente no dashboard do Render com a string de conex√£o do PostgreSQL
      - key: JwtSettings__Key
        sync: false  # Configure manualmente no dashboard do Render
      - key: JwtSettings__Issuer
        value: DreamLusoAPI
      - key: JwtSettings__Audience
        value: DreamLusoClient
      - key: JwtSettings__ExpirationInMinutes
        value: 60
      - key: JwtSettings__RefreshTokenExpirationInDays
        value: 7
      - key: CORS_ALLOWED_ORIGINS
        value: https://dream-luso.vercel.app,https://dreamluso-frontend.onrender.com,https://dreamluso-api.onrender.com
    healthCheckPath: /health

  # Frontend Angular
  - type: web
    name: dreamluso-frontend
    runtime: docker
    plan: free
    dockerfilePath: ./Presentation/Dockerfile
    dockerContext: ./Presentation
    envVars:
      - key: NODE_ENV
        value: production

