<div class="min-h-screen bg-gradient-to-br from-gray-50 via-white to-primary-50/20 dark:from-gray-900 dark:via-dark-900 dark:to-primary-950">
  <app-navbar></app-navbar>

  <div class="pt-24 pb-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      
      <!-- Header -->
      <div class="mb-12 animate-fade-in-up">
        <div class="inline-block px-4 py-2 bg-gradient-luxury text-white rounded-full text-sm font-semibold mb-4">
          üèòÔ∏è Explorar Im√≥veis
        </div>
        <h1 class="text-5xl md:text-6xl font-playfair font-bold text-gray-900 dark:text-white mb-3">
          Descubra o Seu <span class="text-gradient">Im√≥vel Ideal</span>
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300">
          <span class="font-bold text-primary-600 dark:text-primary-400">{{ totalProperties }}</span> im√≥veis dispon√≠veis
        </p>
      </div>

      <!-- Filters -->
      <div class="card-luxury p-8 mb-10 border border-gray-100 dark:border-white/10 animate-scale-in" style="animation-delay: 0.2s;">
        <form (ngSubmit)="applyFilters()" class="space-y-6">
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- City -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üìç Cidade</label>
              <input
                type="text"
                [(ngModel)]="filters.city"
                name="city"
                placeholder="Ex: Lisboa, Porto..."
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
            </div>

            <!-- Price Range -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üí∞ Pre√ßo M√≠n</label>
              <input
                type="number"
                [(ngModel)]="filters.minPrice"
                name="minPrice"
                placeholder="‚Ç¨0"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
            </div>

            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üí∞ Pre√ßo M√°x</label>
              <input
                type="number"
                [(ngModel)]="filters.maxPrice"
                name="maxPrice"
                placeholder="‚Ç¨1.000.000"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
            </div>

            <!-- Property Type -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üè† Tipo</label>
              <select
                [(ngModel)]="filters.propertyType"
                name="propertyType"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
                <option [ngValue]="undefined">Todos</option>
                <option value="Apartment">Apartamento</option>
                <option value="House">Casa</option>
                <option value="Villa">Moradia</option>
                <option value="Land">Terreno</option>
                <option value="Commercial">Comercial</option>
              </select>
            </div>

            <!-- Bedrooms -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üõèÔ∏è Quartos</label>
              <select
                [(ngModel)]="filters.minBedrooms"
                name="minBedrooms"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
                <option [ngValue]="undefined">Qualquer</option>
                <option [ngValue]="1">1+</option>
                <option [ngValue]="2">2+</option>
                <option [ngValue]="3">3+</option>
                <option [ngValue]="4">4+</option>
              </select>
            </div>

            <!-- Transaction Type -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üíº Neg√≥cio</label>
              <select
                [(ngModel)]="filters.transactionType"
                name="transactionType"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
                <option [ngValue]="undefined">Todos</option>
                <option value="Sale">Venda</option>
                <option value="Rent">Arrendamento</option>
              </select>
            </div>

            <!-- Bathrooms -->
            <div>
              <label class="block text-sm font-bold text-gray-900 dark:text-white mb-3">üöø WCs</label>
              <select
                [(ngModel)]="filters.minBathrooms"
                name="minBathrooms"
                class="w-full px-4 py-3 bg-gradient-to-br from-gray-50 to-primary-50/30 dark:from-dark-700 dark:to-dark-800 border-2 border-gray-200 dark:border-white/10 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all">
                <option [ngValue]="undefined">Qualquer</option>
                <option [ngValue]="1">1+</option>
                <option [ngValue]="2">2+</option>
                <option [ngValue]="3">3+</option>
              </select>
            </div>

            <!-- Submit -->
            <div class="flex items-end">
              <button
                type="submit"
                class="w-full px-6 py-3 bg-gradient-luxury text-white font-bold rounded-xl hover:shadow-glow transition-all duration-300 transform hover:scale-105">
                <div class="flex items-center justify-center gap-2">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                  </svg>
                  <span>Aplicar Filtros</span>
                </div>
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Properties Grid -->
      @if (loading) {
        <div class="flex justify-center items-center h-96">
          <div class="relative">
            <div class="animate-spin rounded-full h-24 w-24 border-4 border-primary-200"></div>
            <div class="animate-spin rounded-full h-24 w-24 border-4 border-primary-600 border-t-transparent absolute top-0"></div>
          </div>
        </div>
      } @else if (properties.length === 0) {
        <div class="card-luxury text-center py-24 px-8 border border-gray-100 dark:border-white/10">
          <div class="w-32 h-32 bg-gradient-to-br from-primary-100 to-purple-100 dark:from-primary-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center mx-auto mb-6">
            <svg class="w-16 h-16 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
          </div>
          <h3 class="text-3xl font-playfair font-bold text-gray-900 dark:text-white mb-3">Nenhum im√≥vel encontrado</h3>
          <p class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto">Tente ajustar os filtros de pesquisa ou explore outras op√ß√µes</p>
          <button (click)="clearFilters()" class="btn-primary px-10 py-4">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              <span>Limpar Filtros</span>
            </div>
          </button>
        </div>
      } @else {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in-up" style="animation-delay: 0.4s;">
          @for (property of properties; track property.id) {
            <app-property-card [property]="property"></app-property-card>
          }
        </div>
      }
    </div>
  </div>

  <app-footer></app-footer>
</div>

